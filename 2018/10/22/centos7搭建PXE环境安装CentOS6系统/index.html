<!DOCTYPE HTML>
<html lang="zh-Hans">
<head>
    <head>
    <meta charset="utf-8">
    <meta name="keywords" content=", hexo-theme-matery">
    <meta name="description" content="这是刘绪冲的博客">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>九尾狐</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
</head>
</head>

<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="container">
            <div class="nav-wrapper">
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="/medias/logo.png" class="logo-img hide-on-small-only">
                        
                        <span class="logo-span">九尾狐</span>
                    </a>
                </div>

                <a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">首页</a>
    </li>
    
    
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">标签</a>
    </li>
    
    
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">归档</a>
    </li>
    
    
    <li>
        <a id="toggleSearch" class="waves-effect waves-light">
            <i id="searchIcon" class="mdi-action-search"></i>
        </a>
    </li>

</ul>

<div class="side-nav" id="mobile-nav">
    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">九尾狐</div>
        <div class="logo-desc">
            
            这是刘绪冲的博客
            
        </div>
    </div>
    <ul class="menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                <i class="fa fa-link fa-lg fa-fw"></i>首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                <i class="fa fa-link fa-lg fa-fw"></i>标签
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                <i class="fa fa-link fa-lg fa-fw"></i>归档
            </a>
        </li>
        
    </ul>
    <div class="social-link">
        <a href="https://github.com/LIUXUCHONG" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub"
           data-position="top" data-delay="50">
            <i class="fa fa-github fa-lg"></i>
        </a>
        <a href="mailto:1187766935@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我"
           data-position="top" data-delay="50">
            <i class="fa fa-envelope fa-lg"></i>
        </a>
        <a href="#!" class="tooltipped" data-tooltip="QQ号：1187766935" data-position="top" data-delay="50">
            <i class="fa fa-qq fa-lg"></i>
        </a>
    </div>
</div>

            </div>
        </div>
    </nav>
</header>



<div class="bg-cover post-cover" style="background-image: url('/medias/featureimages/4.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        centos7搭建PXE环境安装CentOS6系统
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<main class="content">

    <!-- 文章内容详情 -->
    <div id="artDetail" class="container">
        <div class="card">
            <div class="card-content article-info">
                
                <div class="author-info">
                    <span>
                        <i class="fa fa-calendar fa-fw"></i>2018-10-22
                    </span>
                </div>
            </div>
            <hr>
            <div class="card-content article-card-content">
                <div id="articleContent">
                    <p><strong>一、服务器系统的安装</strong><br>本人在服务器里安装的centos7，最好不是最小化安装，因为最小化安装里面很多命令没有需要你去安装，并且保证能上网。具体步骤请参观<a href="http://blog.51cto.com/13670314/2160430" target="_blank" rel="noopener">–&gt;史上最详细版Centos6安装详细教程</a> ；centos6和centos7的安装步骤是一样的。<br><strong>二、安装TFTP服务</strong></p>
<p>yum update 首先更新一下yum源，保证yum到的软件都是最新版本<br>mkdir -p /tftpboot 在根目录下创建一个目录用做tftp服务器的根目录<br>vim /etc/xinetd.d/tftp 编辑tftp配置文件<br><img src="/2018/10/22/centos7搭建PXE环境安装CentOS6系统/1.png" alt=""><br>service xinetd restart  或者 systemctl restart xinetd.service  重启xinetd服务<br><strong>三、获取pxelinux.0引导文件</strong></p>
<p>yum install -y syslinux 安装引导服务<br>pxelinux.0文件在syslinux包中<br>cp /usr/share/syslinux/pxelinux.0 /tftpboot/  复制到刚才创建的/tftpboot目录下<br><strong>四、安装dhcp服务</strong><br>yum install -y dhcp  安装dhcp软件包<br>vim /etc/dhcp/dhcpd.conf 编辑dhcp配置文件<br><img src="/2018/10/22/centos7搭建PXE环境安装CentOS6系统/2.png" alt=""><br>以上画红色下划线处是需要自己改的地方，按照自己的真实情况修改。<br>其中subnet是虚拟机所在网段<br>range 后面跟的是dhcp池的范围<br>next-server 是pxe服务器的ip<br>hardware ethernet 是pxe服务器的硬件地址<br>用ifconfig 命令可以查看到以上所需要的信息</p>
<p>编辑完毕后保存退出<br>service dhcpd restart 重启dhcp服务器<br><strong>五、安装vsftpd服务</strong></p>
<blockquote>
<p>yum install -y vsftpd</p>
</blockquote>
<p> 禁用防火墙</p>
<blockquote>
<p>systemctl stop firewalld.service </p>
</blockquote>
<p>禁止开机启动防火墙</p>
<blockquote>
<p>firewallsystemctl disable firewalld.service </p>
</blockquote>
<p>setenforce 0 关闭SELinux ，这种修改立时生效，但重启后失效</p>
<blockquote>
<p>vim /etc/selinux/config </p>
</blockquote>
<p><img src="/2018/10/22/centos7搭建PXE环境安装CentOS6系统/3.png" alt=""><br>改变pub文件夹属主，使ftp用户能够上传数据</p>
<blockquote>
<p>chown ftp /var/ftp/pub/</p>
</blockquote>
<blockquote>
<p>vim /etc/vsftpd/vsftpd.conf </p>
</blockquote>
<p>确保以下设置<br><img src="/2018/10/22/centos7搭建PXE环境安装CentOS6系统/4.png" alt=""><br><img src="/2018/10/22/centos7搭建PXE环境安装CentOS6系统/5.png" alt=""><br><img src="/2018/10/22/centos7搭建PXE环境安装CentOS6系统/6.png" alt=""><br>重启vsftpd服务</p>
<blockquote>
<p>service vsftpd restart</p>
</blockquote>
<p>创建目录mkdir -p /var/ftp/pub/iso 并且上传CentOS6 ISO文件到/var/ftp/pub/iso目录下<br>rz上传<br><img src="/2018/10/22/centos7搭建PXE环境安装CentOS6系统/7.png" alt=""><br>如果没有rz命令用 yum install lrzsz安装一下，注意rz只能上传不大于4G的文件，如果大于4G可以用其他方法上传<br> 创建目录用于挂载iso文件</p>
<blockquote>
<p>mkdir -p /var/ftp/c6-64 </p>
</blockquote>
<p>挂载ISO：</p>
<blockquote>
<p>mount -o loop /var/ftp/pub/iso/CentOS-6.8-x86_64-bin-DVD1.iso /var/ftp/c6-64/</p>
</blockquote>
<p><strong>六、准备文件</strong><br>复制文件并且创建目录</p>
<blockquote>
<p> cp /var/ftp/c6-64/images/pxeboot/vmlinuz /tftpboot/vmlinuz.c6-64<br> cp /var/ftp/c6-64/images/pxeboot/initrd.img /tftpboot/initrd.img.c6-64<br> mkdir -p /tftpboot/pxelinux.cfg<br> vim /tftpboot/pxelinux.cfg/default </p>
</blockquote>
<p> 编辑default文件填写如下内容<br><img src="/2018/10/22/centos7搭建PXE环境安装CentOS6系统/8.png" alt=""></p>
<blockquote>
<p>default c6<br>prompt 1<br>timeout 100<br>display boot.msg<br>label c6<br>  kernel vmlinuz.c6-64<br>  append initrd=initrd.img.c6-64 method=<a href="ftp://172.18.74.179/c6-64" target="_blank" rel="noopener">ftp://172.18.74.179/c6-64</a> devfs=nomount</p>
</blockquote>
<p>其中172.18.74.179是FTP服务器IP<br>创建/tftpboot/boot.msg用于显示信息：<br><img src="/2018/10/22/centos7搭建PXE环境安装CentOS6系统/9.png" alt=""><br>pxe环境已经搭建完毕！</p>
<p>。。。从前车马很慢，书信很远，一生只够爱一个人！</p>

                </div>
                <hr/>

                <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

                <div class="reprint">
                    <p>
                        <span class="reprint-tip">Reprint please specify: </span>
                        <a href="http://yoursite.com" class="b-link-green">九尾狐</a>
                        <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                        <a href="/2018/10/22/centos7搭建PXE环境安装CentOS6系统/" class="b-link-green">centos7搭建PXE环境安装CentOS6系统</a>
                    </p>
                </div>
            </div>
        </div>

        
        <link rel="stylesheet" href="/libs/gitment/gitment-default.css">
<link rel="stylesheet" href="/css/gitment.css">

<div class="gitment-card card" data-aos="fade-up">
    <div id="gitment-content" class="card-content"></div>
</div>

<script src="/libs/gitment/gitment.js"></script>
<script>
    var gitment = new Gitment({
        id: 'Mon Oct 22 2018 10:17:37 GMT+0800',
        owner: 'LIUXUCHONG',
        repo: 'liuxuchong.github.io',
        oauth: {
            client_id: 'f54de68b257c3f12e872',
            client_secret: 'e9018bda13811bfed32a87ec29f532e2e108f4d5',
        },
    });

    gitment.render('gitment-content');
</script>
        

        

        

<article id="articles" class="container prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">Previous</div>
            <div class="card">
                <a href="/2018/10/28/RSA-host-key-has-changed-ssh公钥分发失败/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/16.jpg" class="responsive-img" alt="RSA host key has changed,ssh公钥分发失败">
                        
                        <span class="card-title">RSA host key has changed,ssh公钥分发失败</span>
                    </div>
                    <div class="card-content article-content">
                        <div class="summary">
                            分发公钥时出现下图错误

这可能是Linux服务器重新系统、openssh-server重装、更改IP导致的。
输入以下命令即可

ssh-keygen –R adress-ip-du-serveur



                        </div>
                        <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-calendar fa-fw"></i>2018-10-28
                            </span>
                            <span class="publish-author">
                                <i class="fa fa-user fa-fw"></i>
                                
                                刘绪冲
                                
                            </span>
                        </div>
                    </div>
                    
                </a>
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">Next</div>
            <div class="card">
                <a href="/2018/10/18/master-jps-没有namenode问题/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/14.jpg" class="responsive-img" alt="master jps 没有namenode问题">
                        
                        <span class="card-title">master jps 没有namenode问题</span>
                    </div>
                    <div class="card-content article-content">
                        <div class="summary">
                            在主节点机器上执行命令/opt/modules/app/hadoop-2.7.4/sbin/start-all.sh（相当于执行/opt/modules/app/hadoop-2.5.0/sbin/start-dfs.sh和/opt/mod
                        </div>
                        <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-calendar fa-fw"></i>2018-10-18
                            </span>
                            <span class="publish-author">
                                <i class="fa fa-user fa-fw"></i>
                                
                                刘绪冲
                                
                            </span>
                        </div>
                    </div>
                    
                </a>
            </div>
        </div>
        
    </div>
</article>
    </div>
</main>

<footer class="page-footer bg-color">
    <div class="container row center-align">
        
        <div class="col s12 m4 l4 social-link">
            <a href="https://github.com/LIUXUCHONG" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
                <i class="fa fa-github fa-lg"></i>
            </a>
            <a href="mailto:1187766935@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
                <i class="fa fa-envelope fa-lg"></i>
            </a>
            <a href="https://im.qq.com/" class="tooltipped" data-tooltip="QQ: 1187766935" data-position="top" data-delay="50">
                <i class="fa fa-qq fa-lg"></i>
            </a>
        </div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title">Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input" autofocus="">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-double-up"></i>
    </a>
</div>


<script src="/libs/materialize/js/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>
</body>
</html>